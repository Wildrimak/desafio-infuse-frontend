<div class="container">
  <div class="search-container" [class.search-top]="creditos.length > 0">
    <input [(ngModel)]="termoBusca" placeholder="Buscar por número NFS-e ou número crédito">
    <button (click)="consultarCreditos()">Buscar</button>
  </div>

  <div class="erro" *ngIf="mensagemErro">{{ mensagemErro }}</div>

  <div class="resultados stacked" *ngIf="creditos.length > 0">
    <div class="card" *ngFor="let credito of creditos">
      <div><strong>Número do Crédito:</strong> {{ credito.numeroCredito }}</div>
      <div><strong>Número da NFS-e:</strong> {{ credito.numeroNfse }}</div>
      <div><strong>Data de Constituição:</strong> {{ credito.dataConstituicao | date: 'dd/MM/yyyy' }}</div>
      <div><strong>Valor ISSQN:</strong> {{ credito.valorIssqn | currency: 'BRL':'symbol':'1.2-2' }}</div>
      <div><strong>Tipo de Crédito:</strong> {{ credito.tipoCredito }}</div>
      <div class="acoes">
        <button (click)="verDetalhes(credito.numeroCredito)">Ver Detalhes</button>
      </div>
    </div>
  </div>

  <table class="tabela" *ngIf="creditos.length > 0">
    <thead>
      <tr>
        <th>Número do Crédito</th>
        <th>Número da NFS-e</th>
        <th>Data de Constituição</th>
        <th>Valor ISSQN</th>
        <th>Tipo de Crédito</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let credito of creditos">
        <td>{{ credito.numeroCredito }}</td>
        <td>{{ credito.numeroNfse }}</td>
        <td>{{ credito.dataConstituicao | date: 'dd/MM/yyyy' }}</td>
        <td>{{ credito.valorIssqn | currency: 'BRL':'symbol':'1.2-2' }}</td>
        <td>{{ credito.tipoCredito }}</td>
        <td><button (click)="verDetalhes(credito.numeroCredito)">Ver Detalhes</button></td>
      </tr>
    </tbody>
  </table>
</div>
